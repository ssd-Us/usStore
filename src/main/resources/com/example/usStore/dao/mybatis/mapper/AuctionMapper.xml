<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.usStore.dao.mybatis.mapper.AuctionMapper">
  <cache />
  <select id="getAuctionList" resultType="Auction">
    SELECT
      I.ITEMID,
      I.UNITCOST,
      I.TITLE,
      I.DESCRIPTION,
      I.VIEWCOUNT,
      I.QTY,
      I.USERID,
      I.PRODUCTID,
      A.AUCTIONSTATE,
      A.DEADLINE,
      A.STARTPRICE,
      A.BIDPRICE
    FROM AUCTION A, ITEM I
    WHERE A.ITEMID = I.ITEMID
  </select>
  
  <insert id="insertAuction" parameterType="Auction">
     INSERT INTO AUCTION
     	(ITEMID, AUCTIONSTATE, DEADLINE, STARTPRICE, BIDPRICE)
     VALUES 
     	(#{itemId}, #{auctionState}, #{deadLine}, #{startPrice}, #{bidPrice})
  </insert>
  
  
  <delete id="deleteItem" parameterType="String">
     DELETE ITEM
     FROM ITEM
     WHERE ITEMID = #{itemId}
  </delete>
  
  
  <update id="updateAuction" parameterType="Auction">
     UPDATE AUCTION 
     SET ITEMID = #{itemID}, AUCTIONSTATE = #{auctionState}, DEADLINE = #{deadLine}, STARTPRICE = #{startPrice}, BIDPRICE = #{bidPrice}
  </update>
  
  
  <select id="getAuctionById" parameterType="int">
  	SELECT
      I.ITEMID,
      I.UNITCOST,
      I.TITLE,
      I.DESCRIPTION,
      I.VIEWCOUNT,
      I.QTY,
      I.USERID,
      I.PRODUCTID,
      A.AUCTIONSTATE,
      A.DEADLINE,
      A.STARTPRICE,
      A.BIDPRICE
    FROM AUCTION A, ITEM I
    WHERE A.ITEMID = I.ITEMID
    	AND I.ITEMID = #{itemId}
  </select>
</mapper>